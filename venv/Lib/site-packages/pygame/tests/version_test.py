import os
import unittest

<<<<<<< HEAD
=======
from importlib.metadata import version

import pygame
>>>>>>> 705f30d050018b014a6053acce19a31da360c7ed

pg_header = os.path.join("src_c", "include", "_pygame.h")


class VersionTest(unittest.TestCase):
<<<<<<< HEAD
    @unittest.skipIf(
        not os.path.isfile(pg_header), "Skipping because we cannot find _pygame.h"
    )
    def test_pg_version_consistency(self):
        from pygame import version

        pgh_major = -1
        pgh_minor = -1
        pgh_patch = -1
        import re

        major_exp_search = re.compile(r"define\s+PG_MAJOR_VERSION\s+([0-9]+)").search
        minor_exp_search = re.compile(r"define\s+PG_MINOR_VERSION\s+([0-9]+)").search
        patch_exp_search = re.compile(r"define\s+PG_PATCH_VERSION\s+([0-9]+)").search
        with open(pg_header) as f:
            for line in f:
                if pgh_major == -1:
                    m = major_exp_search(line)
                    if m:
                        pgh_major = int(m.group(1))
                if pgh_minor == -1:
                    m = minor_exp_search(line)
                    if m:
                        pgh_minor = int(m.group(1))
                if pgh_patch == -1:
                    m = patch_exp_search(line)
                    if m:
                        pgh_patch = int(m.group(1))
        self.assertEqual(pgh_major, version.vernum[0])
        self.assertEqual(pgh_minor, version.vernum[1])
        self.assertEqual(pgh_patch, version.vernum[2])

    def test_sdl_version(self):
        from pygame import version

        self.assertEqual(len(version.SDL), 3)
=======
    def test_vernum_obj(self):
        major, minor, patch = map(int, pygame.version.ver.split(".")[:3])
        self.assertEqual(pygame.version.vernum.major, major)
        self.assertEqual(pygame.version.vernum[0], major)
        self.assertEqual(pygame.version.vernum.minor, minor)
        self.assertEqual(pygame.version.vernum[1], minor)
        self.assertEqual(pygame.version.vernum.patch, patch)
        self.assertEqual(pygame.version.vernum[2], patch)

    def test_sdl_version(self):
        self.assertEqual(len(pygame.version.SDL), 3)
        self.assertEqual(tuple(pygame.version.SDL), pygame.get_sdl_version())

    def test_installed_version_and_dunder(self):
        self.assertEqual(pygame.__version__, pygame.version.ver)
        self.assertEqual(pygame.__version__, version("pygame-ce"))
>>>>>>> 705f30d050018b014a6053acce19a31da360c7ed


if __name__ == "__main__":
    unittest.main()
